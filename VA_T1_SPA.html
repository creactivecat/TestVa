<!DOCTYPE html>
<html lang="it" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guida di Viaggio: Milano > Roses > Cadaqu√©s</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Earthy Tones -->
    <!-- Application Structure Plan: Ho progettato l'app con una navigazione laterale fissa (a comparsa su mobile) e un'area di contenuto principale. Questa struttura a "dashboard" √® intuitiva e permette all'utente di passare facilmente da una sezione tematica (Itinerario, Storia, Cibo, ecc.) all'altra senza perdere il contesto. Il flusso utente √® non lineare, incoraggiando l'esplorazione libera basata sugli interessi personali, il che √® ideale per una guida di viaggio piuttosto che per un report sequenziale. -->
    <!-- Visualization & Content Choices: Itinerario -> Obiettivo: Informare/Confrontare -> Viz: Card + Grafico a Barre -> Interazione: Tooltip su hover -> Giustificazione: Le card separano chiaramente le tappe, mentre il grafico a barre per il dislivello offre una comprensione visiva immediata dello sforzo fisico richiesto per il trekking. Punti di Interesse/Leggende/Cibo -> Obiettivo: Organizzare -> Viz: Griglia di Card -> Interazione: Hover per feedback -> Giustificazione: Le card sono un metodo efficace e scalabile per presentare blocchi di informazioni eterogenei in modo pulito e digeribile. Libreria: Chart.js per il grafico. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F7F4;
            color: #334155;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
           /* Giustifica il testo di tutti i paragrafi nelle sezioni */
    section p {
        text-align: justify;
    }
    </style>
</head>
<body>

    <div id="app" class="flex">
        <aside id="sidebar" class="bg-slate-800 text-white w-64 fixed top-0 left-0 h-full z-20 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col">
            <div class="p-5 border-b border-slate-700">
                <h1 class="text-xl font-bold text-amber-400">VA - T1</h1>
                <p class="text-sm text-slate-300">Milano > Cadaqu√©s</p>
            </div>
            <nav id="main-nav" class="flex-grow overflow-y-auto">
                <ul></ul>
            </nav>
            <div class="p-4 text-xs text-center text-slate-500 border-t border-slate-700">
                <p>&copy; 2025 - Guida Interattiva</p>
            </div>
        </aside>

        <button id="menu-toggle" class="md:hidden fixed top-4 left-4 z-30 bg-white p-2 rounded-md shadow-md">
            <svg id="menu-open-icon" xmlns="http://www.w.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
            </svg>
            <svg id="menu-close-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>

        <main id="main-content" class="w-full md:ml-64 p-4 sm:p-6 md:p-10">
        </main>
    </div>

    <script>
        const travelData = {
            title: "üó∫Ô∏è VA - T1: Milano > Roses > Cadaqu√©s",
            sections: [
                { id: 'itinerario', title: 'Itinerario', icon: 'üë£', intro: 'Questa sezione delinea il percorso principale del tuo viaggio, dalla partenza a Milano fino alla meta finale, Cadaqu√©s. Troverai dettagli sulle tappe principali, i tempi di percorrenza stimati e le caratteristiche salienti del tragitto, inclusa un\'opzione di trekking per i pi√π avventurosi con una visualizzazione dei dislivelli.' },
                { id: 'spirituale', title: 'Mi sento San Giacomo', icon: 'üõê', intro: 'Esplora il paesaggio spirituale della regione, un territorio segnato da una profonda dualit√† storica. Qui, l\'ascesa di potenti monasteri si scontra con la memoria delle incursioni piratesche. Ogni chiesa e cappella che incontrerai racconta una storia di fede, distruzione e resilienza, offrendo uno spaccato unico sulla storia religiosa e sociale della Costa Brava.' },
                { id: 'storico', title: 'Il prof. Barbero √® il mio idolo', icon: 'üìö', intro: 'Immergiti nella ricca e stratificata storia di questa costa, una vera e propria cronaca scritta nella pietra. Da antichi dolmen preistorici a imponenti fortezze rinascimentali e rifugi di artisti geniali, questa sezione ti guida attraverso i secoli, svelando le civilt√† e i conflitti che hanno plasmato il territorio che stai per visitare.' },
                { id: 'avventura', title: 'Io e Indiana Jones', icon: 'ü™É', intro: 'Se cerchi l\'avventura, questa √® la sezione per te. Qui l\'esplorazione va oltre la semplice visita turistica, trasformandosi in un\'esperienza attiva e coinvolgente. Troverai proposte di trekking che fondono la sfida fisica con la scoperta di paesaggi marini mozzafiato, testimonianze storiche e angoli remoti di natura incontaminata.' },
                { id: 'leggende', title: 'Dylan Dog non √® nessuno', icon: 'üîÆ', intro: 'L\'Empord√† √® una terra di confine, non solo geografico ma anche tra il mondo reale e quello soprannaturale. Questa sezione ti far√† scoprire l\'anima mitica della regione, popolata da leggende di giganti furiosi, streghe potenti, vampiri e pirati. Queste storie, tramandate da generazioni, sono la memoria profonda di un territorio forgiato dal vento e dalla storia.' },
                { id: 'cibo', title: 'Si, Ok, Tutto molto bello, ma che si mangia?', icon: 'üç¥', intro: 'Nessun viaggio √® completo senza un\'immersione nella cultura gastronomica locale. Qui scoprirai la filosofia del "Mar i Muntanya" (Mare e Montagna) che definisce la cucina dell\'Alt Empord√†. Esplora i prodotti tipici, dai celebri gamberi di Roses alle acciughe, e lasciati tentare dai piatti tradizionali che fondono sapientemente i sapori della terra con i tesori del mare.' },
            ],
            content: {
                itinerario: {
                    days: [
                        { day: 'Giorno 1', title: 'Milano ‚Üí Roses', distance: '900 KM', time: '9 Ore', route: "L'itinerario ti porter√† lungo la suggestiva costa del Mar Ligure e della Costa Azzurra. Da Milano, imbocca l'autostrada A7 per poi prendere la A10 in direzione Ventimiglia. Varcato il confine, prosegui sulla A8 in Francia e successivamente sulla AP-7 in Spagna fino a Roses. NON fermarti troppe volte agli autogrill per fare pip√¨ per non incorrere nell‚Äôira di qualche burbero conducente.", features: "Preparati a panorami mozzafiato, quindi togli gli occhi dal giochino sul telefono, potrai comunque usarlo perch√© potresti incorrere in un traffico potenzialmente intenso, specialmente durante i periodi di alta stagione." },
                        { day: 'Giorno 2', title: 'Roses ‚Üí Cadaqu√©s', distance: '20 KM', time: '40 Minuti', route: "Una breve ma suggestiva deviazione che ti porter√† nel cuore del Cap de Creus. Da Roses, la strada GI-614 si snoda tra le colline per raggiungere l'incantevole villaggio di Cadaqu√©s, famoso per le sue case bianche e per essere stato fonte di ispirazione per Salvador Dal√≠.", features: "Il percorso in auto inizia nel contesto urbano di Roses, giungendo al Parc Natural del Cap de Creus. Qui, il paesaggio cambia radicalmente, caratterizzato da incessanti tornanti a saliscendi ‚Äî un vero \"rompi business\" come lo descrivono i locali." }
                    ],
                    hike: {
                        title: 'Percorso a piedi da Roses a Cadaqu√©s (opzionale)',
                        stages: [
                            { title: 'Tappa 1: Roses > Mirador de Punta Falconera', dislivello: 'P+ ~250m | N- ~50m', description: 'Un balcone naturale sul Mediterraneo e sito storico che ospita i resti di una batteria di artiglieria costiera e bunker (1944-1993).', p: 250, n: -50 },
                            { title: 'Tappa 2: Pont del Barral', dislivello: 'P+ ~400m | N- ~550m', description: 'Un piccolo ponte in pietra che scavalca un torrente secco, segnando l\'inizio dell\'ultima fase del viaggio.', p: 400, n: -550 },
                            { title: 'Tappa 3: Cadaqu√©s', dislivello: 'P+ ~50m | N- ~150m', description: 'L\'arrivo al vecchio Casin√≤ e al vicino ufficio del turismo segna la conclusione di questa memorabile tappa.', p: 50, n: -150 }
                        ]
                    }
                },
                spirituale: [
                    { name: "Roses: Esgl√©sia Parroquial de Santa Maria", classification: "Punto di interesse Spirituale", description: "Edificio neoclassico del XIX secolo, erede della lunga tradizione spirituale della comunit√† radicata nell'antico monastero benedettino.", address: "Pla√ßa de l'Esgl√©sia, 13, 17480 Roses, Girona" },
                    { name: "Punta de la Trinitat (Roses): Cappella della Trinit√†", classification: "Punto di interesse Spirituale e Storico", description: "Prima della fortezza, qui esisteva una cappella del 1508. Fu demolita nel 1543 per ordine di Carlo V per far posto al Castell de la Trinitat, trasformando un sito di devozione in un bastione militare.", address: "Carretera del Far, s/n, 17480 Roses, Girona" },
                    { name: "Cadaqu√©s: Ermita de Sant Baldiri", classification: "Punto di interesse Spirituale", description: "Piccola ermita del 1702, finanziata dai pescatori del villaggio. Testimonia la profonda devozione popolare della comunit√†.", address: "Cam√≠ de Sant Baldiri, 17488 Cadaqu√©s, Girona" },
                ],
                storico: [
                     { name: "Roses: Ciutadella de Roses", classification: "Storico, Archeologico e Militare", description: "Immenso complesso fortificato rinascimentale (1543) che racchiude 25 secoli di storia: i resti della colonia greca di Rhode, una villa romana e le rovine del monastero di Santa Maria." },
                     { name: "Roses: Dolmen de la Creu d'en Cobertella", classification: "Storico e Archeologico", description: "Il pi√π grande monumento megalitico della Catalogna (3500-3000 a.C.), una tomba a corridoio costruita con enormi lastre di gneiss." },
                     { name: "Roses: Castrum Visig√≤tic del Puig Rom", classification: "Storico e Archeologico", description: "Insediamento fortificato del VII secolo, uno dei meglio conservati della penisola iberica, con una posizione strategica che offriva un controllo totale sulla baia di Roses." },
                     { name: "Portlligat (Cadaqu√©s): Casa-Museu Salvador Dal√≠", classification: "Storico, Artistico e Culturale", description: "Un'autobiografia tridimensionale. L'unica residenza e studio stabili di Dal√≠, un labirinto surreale dove produsse gran parte della sua opera." }
                ],
                avventura: [
                    { name: "Trekking del GR-92 | Tappa Completa Roses-Cadaqu√©s", classification: "Avventura Escursionistica", description: "L'avventura principale. Un trekking costiero di circa 20-22 km che richiede buona preparazione fisica, attraversando il cuore del Parco Naturale del Cap de Creus." },
                    { name: "Escursione al Faro di Cap de Creus", classification: "Avventura Escursionistica e Paesaggistica", description: "Un sentiero di circa 7 km (solo andata) da Cadaqu√©s conduce al punto pi√π orientale della penisola iberica, in un paesaggio lunare battuto dalla Tramontana." }
                ],
                leggende: [
                    { name: "La Leggenda del Gigante Rotll√† e la Creazione di Es Cucurucuc", classification: "Leggenda Toponomastica", description: "Si racconta che‚Ä¶ il gigante Rotll√†, accecato dalla rabbia per un amore non corrisposto, con un calcio stacc√≤ un pezzo di terra dalla costa, creando l'isolotto di Es Cucurucuc." },
                    { name: "Le Streghe di Llers | L'Epicentro della Stregoneria Catalana", classification: "Leggenda sulla Stregoneria", description: "Si racconta che‚Ä¶ il vicino villaggio di Llers fosse il pi√π grande covo di streghe della Catalogna, che si riunivano in sabbah infernali e scatenavano la Tramontana." },
                    { name: "Il Conte Estruc | Il Vampiro dell'Empord√†", classification: "Leggenda sui Vampiri", description: "Si racconta che‚Ä¶ nel XII secolo, il conte Arnau d'Estruc, morto in eresia, torn√≤ dalla tomba come un vampiro per prosciugare la vita delle giovani donne e abbeverarsi del sangue dei neonati." },
                    { name: "Storie di Pirati Barbareschi | La Cattura di Cervantes vicino a Cadaqu√©s", classification: "Aneddoto Storico Leggendario", description: "Si racconta che‚Ä¶ nel 1575, Miguel de Cervantes fu catturato da corsari barbareschi al largo di questa costa. Trascorse cinque anni in prigionia ad Algeri, un'avventura che segn√≤ profondamente la sua vita e la sua opera." },
                    { name: "La Strega di Cadaqu√©s, Lidia de Noguer", classification: "Folklore Locale", description: "Si racconta che‚Ä¶ Lidia Noguer, conosciuta come \"Sabana\", fosse una delle ultime streghe di Cadaqu√©s. Fu lei a vendere a Salvador Dal√≠ la prima baracca di pescatori a Portlligat, nucleo della sua futura casa-labirinto." }
                ],
                cibo: {
                    products: [
                        { name: "Anxoves de l'Escala", description: "Acciughe sotto sale, prodotto simbolo della vicina L'Escala." },
                        { name: "Botifarra Dol√ßa", description: "Salsiccia di maiale unica al mondo, preparata con carne magra, zucchero e scorza di limone." },
                        { name: "Taps de Cadaqu√©s", description: "Dolcetti a forma di tappo di champagne, soffici e bagnati con uno sciroppo." },
                        { name: "Brunyols de l'Empord√†", description: "Frittelle leggere e gonfie, aromatizzate con anice e limone." },
                        { name: "Oli de Pau", description: "Olio DOP dell'Empord√†, con un carattere distintivo conferitogli dalla Tramontana." },
                        { name: "Peix de la Llonja de Roses", description: "Pesce fresco venduto quotidianamente all'asta del pesce di Roses." },
                        { name: "Gamba de Roses", description: "Il gambero rosso di Roses, una prelibatezza locale molto ricercata." }
                    ],
                    dishes: [
                        { name: "Suquet de Peix", description: "Stufato tradizionale dei pescatori, con pesce di scoglio, patate e un brodo denso e ricco." },
                        { name: "Arr√≤s Negre de l'Empord√†", description: "Un piatto di riso \"Mar i Muntanya\" che prende il suo colore nero da un soffritto di cipolla cotto molto lentamente." },
                        { name: "Mar i Muntanya (Pollastre amb Gambes)", description: "Il piatto che incarna l'anima della cucina locale, combinando pollo ruspante con gamberi o scampi." },
                        { name: "Escalivada", description: "Verdure arrostite (melanzane, peperoni, cipolle) dal sapore affumicato e intenso." },
                        { name: "Pa amb Tom√†quet", description: "Pi√π che una ricetta, un fondamento della cultura gastronomica catalana." },
                        { name: "Pomes de Relleno", description: "Un dolce antico e sorprendente: mele farcite con carne macinata e cotte al forno." }
                    ]
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            const mainNav = document.getElementById('main-nav').querySelector('ul');
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menu-toggle');
            const menuOpenIcon = document.getElementById('menu-open-icon');
            const menuCloseIcon = document.getElementById('menu-close-icon');

            function render() {
                // Add Home link
                mainNav.innerHTML += `
                    <li>
                        <a href="porompompom.html" class="flex items-center gap-3 px-4 py-3 text-slate-300 hover:bg-slate-700 transition-colors duration-200 border-l-4 border-transparent">
                            <span class="text-xl">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                                </svg>
                            </span>
                            <span class="font-semibold">Home</span>
                        </a>
                    </li>
                `;

                travelData.sections.forEach(section => {
                    mainNav.innerHTML += `
                        <li>
                            <a href="#${section.id}" data-nav-id="${section.id}" class="flex items-center gap-3 px-4 py-3 text-slate-300 hover:bg-slate-700 transition-colors duration-200 border-l-4 border-transparent">
                                <span class="text-xl">${section.icon}</span>
                                <span class="font-semibold">${section.title}</span>
                            </a>
                        </li>
                    `;

                    let sectionContent = '';
                    switch (section.id) {
                        case 'itinerario':
                            sectionContent = `
                                <div class="space-y-8">
                                    ${travelData.content.itinerario.days.map(day => `
                                        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                                            <div class="p-6">
                                                <div class="flex justify-between items-start mb-2">
                                                    <h3 class="text-2xl font-bold text-slate-800">${day.title}</h3>
                                                    <span class="text-sm font-semibold text-amber-600 bg-amber-100 px-3 py-1 rounded-full">${day.day}</span>
                                                </div>
                                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-2 text-center">
                                                    <div class="bg-slate-50 p-3 rounded-md"><span class="font-bold">Distanza:</span> ${day.distance}</div>
                                                    <div class="bg-slate-50 p-3 rounded-md"><span class="font-bold">Tempo:</span> ${day.time}</div>
                                                </div>
                                                <div class="space-y-3">
                                                    <div><h4 class="font-semibold text-slate-700">Percorso:</h4><p class="text-slate-600">${day.route}</p></div>
                                                    <div><h4 class="font-semibold text-slate-700">Caratteristiche:</h4><p class="text-slate-600">${day.features}</p></div>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="mt-12 bg-white rounded-lg shadow-lg p-6">
                                    <h3 class="text-2xl font-bold text-slate-800 mb-2">${travelData.content.itinerario.hike.title}</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                                        <div class="space-y-4">
                                            ${travelData.content.itinerario.hike.stages.map(stage => `
                                                <div class="border-l-4 border-amber-400 pl-4 py-2 bg-slate-50 rounded-r-md">
                                                    <h4 class="font-semibold text-slate-800">${stage.title}</h4>
                                                    <p class="text-sm text-slate-500">${stage.dislivello}</p>
                                                    <p class="text-sm mt-1 text-slate-600">${stage.description}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                        <div class="chart-container">
                                            <canvas id="hikeChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            `;
                            break;
                        case 'cibo':
                             sectionContent = `
                                <div class="space-y-12">
                                    <div>
                                        <h3 class="text-3xl font-bold text-slate-800 mb-6">Prodotti e Preparati Locali</h3>
                                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                            ${travelData.content.cibo.products.map(item => `
                                                <div class="bg-white p-4 rounded-lg shadow-md text-center transform hover:-translate-y-1 transition-transform duration-200">
                                                    <h4 class="font-semibold text-slate-700">${item.name}</h4>
                                                    <p class="text-sm text-slate-500 mt-1">${item.description}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                    <div>
                                        <h3 class="text-3xl font-bold text-slate-800 mb-6">Piatti Tradizionali</h3>
                                        <div class="space-y-6">
                                            ${travelData.content.cibo.dishes.map(item => `
                                                <div class="bg-white p-6 rounded-xl shadow-lg transform hover:shadow-xl transition-shadow duration-200">
                                                    <h4 class="text-xl font-bold text-slate-800">${item.name}</h4>
                                                    <p class="mt-2 text-slate-600">${item.description}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            `;
                            break;
                        default:
                            sectionContent = `
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    ${travelData.content[section.id].map(item => `
                                        <div class="bg-white rounded-xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300">
                                            <div class="p-6">
                                                <div class="uppercase tracking-wide text-sm text-amber-600 font-semibold">${item.classification}</div>
                                                <h3 class="block mt-1 text-lg leading-tight font-bold text-slate-800">${item.name}</h3>
                                                <p class="mt-2 text-slate-600">${item.description}</p>
                                                ${item.address ? `<p class="mt-3 text-xs text-slate-500 flex items-center gap-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                                                    ${item.address}</p>` : ''}
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                            break;
                    }
                    
                    mainContent.innerHTML += `
                        <section id="${section.id}" class="py-8">
                            <div class="max-w-5xl mx-auto">
                                <div class="flex items-center gap-4 mb-2">
                                    <div class="text-3xl bg-amber-100 p-3 rounded-full">${section.icon}</div>
                                    <h2 class="text-4xl font-bold text-slate-800">${section.title}</h2>
                                </div>
                                <p class="text-lg text-slate-600 mb-6">${section.intro}</p>
                                ${sectionContent}
                            </div>
                        </section>
                    `;
                });
                
                initChart();
            }

            function initChart() {
                const hikeData = travelData.content.itinerario.hike.stages;
                const ctx = document.getElementById('hikeChart')?.getContext('2d');
                if (!ctx) return;

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: hikeData.map(s => s.title.split(':')[0]),
                        datasets: [
                            {
                                label: 'Dislivello Positivo (m)',
                                data: hikeData.map(s => s.p),
                                backgroundColor: 'rgba(217, 119, 6, 0.6)',
                                borderColor: 'rgba(217, 119, 6, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Dislivello Negativo (m)',
                                data: hikeData.map(s => s.n),
                                backgroundColor: 'rgba(71, 85, 105, 0.6)',
                                borderColor: 'rgba(71, 85, 105, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += Math.abs(context.parsed.y) + 'm';
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value + 'm';
                                    }
                                }
                            },
                            x: {
                                ticks: {
                                    maxRotation: 0,
                                    minRotation: 0,
                                    callback: function(value, index, values) {
                                        const label = this.getLabelForValue(value);
                                        return label.length > 16 ? label.substring(0, 16) + '...' : label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function handleScroll() {
                const sections = document.querySelectorAll('section');
                const navLinks = document.querySelectorAll('#main-nav a');
                let currentSectionId = '';

                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (window.scrollY >= sectionTop - 100) {
                        currentSectionId = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('bg-slate-700', 'border-amber-400', 'text-white');
                    link.classList.add('border-transparent');
                    if (link.dataset.navId === currentSectionId) {
                        link.classList.add('bg-slate-700', 'border-amber-400', 'text-white');
                        link.classList.remove('border-transparent');
                    }
                });
            }

            function toggleSidebar() {
                sidebar.classList.toggle('-translate-x-full');
                menuOpenIcon.classList.toggle('hidden');
                menuCloseIcon.classList.toggle('hidden');
            }

            render();
            window.addEventListener('scroll', handleScroll);
            menuToggle.addEventListener('click', toggleSidebar);
            
            document.querySelectorAll('#main-nav a').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (window.innerWidth < 768) {
                       toggleSidebar();
                    }
                });
            });
        });
    </script>
</body>
</html>